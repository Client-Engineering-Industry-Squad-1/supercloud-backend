Table nist {
  number string [pk]
  family string // [not null, unique]
  title string
  priority string
  baseline_impact object
  statement object
  supplemental_guidance object
  references object
  withdrawn object
  base_control string
  parent_control string [ref: > nist.number]
}

Table control {
  id string [pk]
  name string
  description string
  fs_guidance string
  parameters string
  implementation string
  base_control boolean
  parent_control string [ref: > control.id]
  nist string [ref: > nist.number]
}

Enum grouping {
  "Security & Identity"
  "Developer Tools"
  "SRE Tools"
  "Databases"
  "Network"
  "Storage"
  "Compute"
  "IBM Cloud Platform Services"
}
Enum deploymentMethod {
  "Managed Service"
  "Platform"
  "Operator"
  "Helm"
}
Enum provision {
  "Terraform"
  "Operator"
  "Ansible"
  "Helm"
}
Table service {
  service_id string [pk]
  grouping grouping
  ibm_catalog_service string
  desc string
  deployment_method deploymentMethod
  provision provision
  automation_id string
  default_automation_variables string
}

Table controlMapping {
  _id string
  control_id string [pk, ref: > control.id]
  service_id string [pk, ref: > service.service_id]
  arch_id string [pk, ref: > architecture.id]
  control_subsections string [pk, note: 'IBM SSP control sub section(s).']
  compliant string
  configuration string
  evidence string
  scc_profile string [pk, ref: > profile.id]
  desc string
  comment string
}

Table goal {
  id string [pk]
  description string
  parameters string
  parameters_default string
  comments string
}

Table mappingGoals {
  goal_id  string [pk, ref: > goal.id]
  mapping_id string [pk, ref: > controlMapping._id]
}

Table profile {
  id string [pk]
  name string
  description string
}

Table architecture {
  id string [pk]
  name string
  short_desc string
  long_desc string
  public boolean
  production_ready boolean
  automation_variables string
}

Table user {
  email string
}

Enum userRole  {
  "read-only"
  "owner"
}
Table userArchitectures {
  email string [pk, ref: > user.email]
  arch_id string [pk, ref: > architecture.id]
  // role userRole
}

Table bom {
  service_id string [pk, ref: > service.service_id]
  arch_id string [pk, ref: > architecture.id]
  desc string
  automation_variables string
}

Table automation {
  id string [pk, ref: > service.service_id]
  type string
  module_name string
  module_location string
}