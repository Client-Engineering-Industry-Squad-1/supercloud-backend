Table nist {
  number string [pk]
  family string // [not null, unique]
  title string
  priority string
  baseline_impact object
  statement object
  supplemental_guidance object
  references object
  withdrawn object
  base_control string
  parent_control string [ref: > nist.number]
}

Table control {
  id string [pk]
  name string
  base_control boolean
  parent_control string [ref: > control.id]
  nist string [ref: > nist.number]
}

Table controlDetails {
  id string [pk, ref: > control.id]
  name string
  focus_area string
  family string
  nist_functions string
  risk_desc string
  objective string
  fs_guidance string
  fs_params string
  nist_guidance string
  implementation string
  requirements object[]
}

Enum ControlType1 {
  "Preventative"
  "Detective"
  "Corrective"
}
Enum ControlType2 {
  "Administrative"
  "Technical"
  "Physical"
}
Enum ControlType3 {
  "Automated"
  "Manual, Improbably Automated"
  "Manual, Prospectively Automated"
}
Table controlRequirement {
  id string [pk]
  control_id string [ref: > controlDetails.id]
  description string
  risk_rating string
  control_type_1 ControlType1
  control_type_2 ControlType2
  control_type_3 ControlType3
  ibm_public_cloud_scope string
  ibm_public_cloud_resp string
  developer_scope string
  developer_resp string
  operator_scope string
  operator_resp string
  consumer_scope string
  consumer_resp string
}



Table automationModule {
  id string [pk]
  name string
  description string
  alias string
  tags string[]
  versions automationModuleVersion[]
}
Table service {
  service_id string [pk, ref: > automationModule.name]
  name string
  ibm_catalog_id string
  fs_validated bool
}

Table controlMapping {
  _id string
  control_id string [pk, ref: > control.id]
  service_id string [pk, ref: > service.service_id]
  arch_id string [pk, ref: > architecture.id]
  control_subsections string [pk, note: 'IBM SSP control sub section(s).']
  compliant string
  configuration string
  evidence string
  scc_profile string [pk, ref: > profile.id]
  desc string
  comment string
}

Table goal {
  id string [pk]
  description string
  parameters string
  parameters_default string
  comments string
}

Table mappingGoals {
  goal_id  string [pk, ref: > goal.id]
  mapping_id string [pk, ref: > controlMapping._id]
}

Table profile {
  id string [pk]
  name string
  description string
}

Table architecture {
  id string [pk]
  name string
  short_desc string
  long_desc string
  public booleanf
  production_ready boolean
  automation_variables string
}

Table solution {
  id string [pk]
  name string
  short_desc string
  long_desc string
  readme string
}

Table SolutionArchitectures {
  arch_id string [pk, ref: > architecture.id]
  solution_id string [pk, ref: > solution.id]
}

Table user {
  email string
}

Enum userControlStatus  {
  "not_started"
  "started"
  "implemented"
  "complete"
}
Table userOnBoarding {
  control_id string [pk, ref: > control.id]
  user_id string [pk, ref: > user.email]
  status userControlStatus
}

Enum userRole  {
  "read-only"
  "owner"
}
Table userArchitectures {
  email string [pk, ref: > user.email]
  arch_id string [pk, ref: > architecture.id]
  // role userRole
}

Table userSolutions {
  email string [pk, ref: > user.email]
  solution_id string [pk, ref: > solution.id]
  // role userRole
}

Table bom {
  service_id string [pk, ref: > service.service_id]
  arch_id string [pk, ref: > architecture.id]
  desc string
  automation_variables string
}

Table OnBoardingStages {
  id string [pk]
  label string
  secondary_label string
  description string
  position int
  content string
}